<div class="lesson-creator-container">
    <div class="creator-card">
        <!-- Header -->
        <div class="header">
            <h1>{{ i18n.t('lessonCreator.title') }}</h1>
            <p>{{ i18n.t('lessonCreator.subtitle') }}</p>
        </div>

        <!-- Main Form -->
        <form (ngSubmit)="generateLesson()" class="lesson-form">

            <!-- Topic Input -->
            <div class="form-group">
                <label for="topic">
                    <span class="label-icon">üí°</span>
                    {{ i18n.t('lessonCreator.topic.label') }}
                </label>
                <input type="text" id="topic" [(ngModel)]="topic" name="topic"
                    [placeholder]="i18n.t('lessonCreator.topic.placeholder')" class="topic-input"
                    [disabled]="isGenerating()" required />
            </div>

            <!-- Example Topics -->
            <div class="example-topics">
                <p class="example-label">{{ i18n.t('lessonCreator.topic.examples') }}</p>
                <div class="example-grid">
                    @for (example of exampleTopics; track example.key) {
                    <button type="button" class="example-chip" (click)="selectExample(example)"
                        [disabled]="isGenerating()">
                        <span class="chip-icon">{{ example.icon }}</span>
                        <span>{{ i18n.t('lessonCreator.examples.' + example.key) }}</span>
                    </button>
                    }
                </div>
            </div>

            <!-- Difficulty Level -->
            <div class="form-group">
                <label>
                    <span class="label-icon">üìä</span>
                    {{ i18n.t('lessonCreator.level.label') }}
                </label>
                <div class="option-grid">
                    @for (lvl of levels; track lvl.value) {
                    <button type="button" class="option-card" [class.selected]="level() === lvl.value"
                        (click)="level.set(lvl.value)" [disabled]="isGenerating()">
                        <span class="option-icon">{{ lvl.icon }}</span>
                        <div class="option-content">
                            <h3>{{ i18n.t('lessonCreator.level.' + lvl.value) }}</h3>
                            <p>{{ i18n.t('lessonCreator.level.' + lvl.value + 'Desc') }}</p>
                        </div>
                    </button>
                    }
                </div>
            </div>

            <!-- Learning Style -->
            <div class="form-group">
                <label>
                    <span class="label-icon">üé®</span>
                    {{ i18n.t('lessonCreator.learningStyle.label') }}
                </label>
                <div class="option-grid">
                    @for (style of learningStyles; track style.value) {
                    <button type="button" class="option-card" [class.selected]="learningStyle() === style.value"
                        (click)="learningStyle.set(style.value)" [disabled]="isGenerating()">
                        <span class="option-icon">{{ style.icon }}</span>
                        <div class="option-content">
                            <h3>{{ i18n.t('lessonCreator.learningStyle.' + style.value) }}</h3>
                            <p>{{ i18n.t('lessonCreator.learningStyle.' + style.value + 'Desc') }}</p>
                        </div>
                    </button>
                    }
                </div>
            </div>

            <!-- Optional Age -->
            <div class="form-group">
                <label for="age">
                    <span class="label-icon">üë§</span>
                    {{ i18n.t('lessonCreator.age.label') }}
                    <span class="optional-badge">{{ i18n.t('common.optional') || 'Optional' }}</span>
                </label>
                <input type="number" id="age" [(ngModel)]="age" name="age"
                    [placeholder]="i18n.t('lessonCreator.age.placeholder')" class="age-input" min="5" max="100"
                    [disabled]="isGenerating()" />
            </div>

            <!-- Alias (Optional) -->
            <div class="form-group">
                <label for="alias">{{ i18n.t('lessonCreator.alias.label') }} <span class="optional">({{
                        i18n.t('common.optional') || 'Optional' }})</span></label>
                <input type="text" id="alias" [(ngModel)]="alias" name="alias"
                    [placeholder]="i18n.t('lessonCreator.alias.placeholder')" maxlength="50"
                    [disabled]="isGenerating()" />
                <small class="hint">{{ i18n.t('lessonCreator.alias.hint') }}</small>
            </div>

            <!-- Error Message -->
            @if (error()) {
            <div class="error-message">
                <span class="error-icon">‚ö†Ô∏è</span>
                <span>{{ error() }}</span>
            </div>
            }

            <!-- Generate Button -->
            <button type="submit" class="generate-button" [class.loading]="isGenerating()"
                [disabled]="!topic() || isGenerating()">
                @if (isGenerating()) {
                <span class="spinner"></span>
                <span>{{ i18n.t('lessonCreator.generating') }}</span>
                } @else {
                <span class="button-icon">‚ú®</span>
                <span>{{ i18n.t('lessonCreator.generateButton') }}</span>
                }
            </button>
        </form>

        <!-- Info Footer -->
        <div class="info-footer">
            <p>
                <strong>üí° {{ i18n.t('common.tip') || 'Tip' }}:</strong> {{ i18n.t('lessonCreator.tip') || 'The more
                specific your topic, the better your personalized lesson will be!' }}
            </p>
        </div>
    </div>
</div>