<div class="learning-session-container">
  <!-- Encabezado Superior -->
  <header class="session-header">
    <div class="header-controls">
      <app-emotion-indicator></app-emotion-indicator>
    </div>
  </header>

  <!-- Contenido Principal -->
  <main class="content-feed" #messagesContainer>

    <!-- Estado de Carga Inicial -->
    <div *ngIf="isLoading" class="skeleton-loader fade-in">
      <div class="skeleton-card"></div>
      <div class="skeleton-line"></div>
      <div class="skeleton-line short"></div>
      <p class="loading-text">{{ i18n.t('learningSession.preparingLesson') }}</p>
    </div>

    <!-- Stream de Contenido -->
    <div *ngFor="let chunk of displayedChunks" class="chunk-card fade-in">

      <!-- Chunk de Texto -->
      <div *ngIf="chunk.type === 'text'" class="text-content">
        <p>{{ chunk.content }}</p>
      </div>

      <!-- Chunk Visual (Imagen) -->
      <div *ngIf="chunk.type === 'image_prompt'" class="visual-content">
        <div class="image-placeholder">
          <span class="icon">ğŸ–¼ï¸</span>
          <p class="caption">{{ chunk.content }}</p>
        </div>
      </div>

    </div>
  </main>

  <!-- Vista Previa de CÃ¡mara (Siempre visible durante la sesiÃ³n) -->
  <div class="camera-preview" *ngIf="isCameraActive">
    <video #videoElement autoplay playsinline muted></video>
    <div class="camera-label">ğŸ“¹ {{ i18n.t('learningSession.cameraActive') }}</div>
  </div>

  <!-- Overlay de InterrupciÃ³n -->
  <div *ngIf="isPaused" class="interruption-overlay fade-in">
    <div class="overlay-content">
      <h2>{{ i18n.t('learningSession.interruption.title') }} ğŸ˜•</h2>
      <p>{{ i18n.t('learningSession.interruption.message') }}</p>
      <button (click)="resumeSession()" class="btn-primary">{{ i18n.t('learningSession.interruption.continueBtn') }}</button>
      <button (click)="resumeSession()" class="btn-secondary">{{ i18n.t('learningSession.interruption.explainBtn') }}</button>
    </div>
  </div>

</div>